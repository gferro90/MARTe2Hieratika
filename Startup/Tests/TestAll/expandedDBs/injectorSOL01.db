#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBD("/home/ifmifmgr/topIFMIF/dbd/injector.dbd")
#! DBDEND


record(ai, LEBT:SOL01_PS:Status) {
  field(DESC, "lect status")
  field(SCAN, "I/O Intr")
  field(DTYP, "asynInt32")
  field(INP, "@asyn(modbus_S1:lect_status 0)MODBUS_DATA")
}


record(ao, LEBT:SOL01_PS:ISet) {
  field(DESC, "ecriture Cde analog")
  field(DTYP, "asynFloat64")
  field(OMSL, "supervisory")
  field(DRVH, "350")  # changed from 600 for PhaseB
  field(DRVL, "0")
  field(HOPR, "350")  # changed from 600 for PhaseB
  field(LOPR, "0")
  field(PREC, "1")
  field(FLNK, "LEBT:SOL01_PS:IntCmd")
  field(OUT, "@asyn(modbus_S1:ecr_Icons 0 0)MODBUS_DATA")
}

record(ao, LEBT:SOL01_PS:Rampe) {
  field(DESC, "ecriture Cde analog")
  field(DTYP, "asynFloat64")
  field(OMSL, "supervisory")
  field(DRVH, "50")
  field(DRVL, "0")
  field(HOPR, "50")
  field(LOPR, "0")
  field(FLNK, "LEBT:SOL01_PS:IntCmd")
  field(OUT, "@asyn(modbus_S1:ecr_rampe 0 0)MODBUS_DATA")
}


record(bo, LEBT:SOL01_PS:IntCmd) {
#  field(OMSL, "closed_loop")
#  field(DOL, "1")
  field(VAL, "1")
  field(OUT, "SRC:SOL01_PS:RampeCmd.VAL PP")
}

record(bo, LEBT:SOL01_PS:RampeCmd) {
  field(DESC, "Cde rampe SOL01")
  field(DTYP, "asynUInt32Digital")
  field(ONAM, "ON")
  field(ZNAM, "OFF")
  field(HIGH, "1")
  field(OUT, "@asynMask(modbus_S1:ecr_Bit3 0 1 0)MODBUS_DATA")
}


record(bo, LEBT:SOL01_PS:PretRampe) {
  field(DESC, "Cde demande rampe S1")
  field(DTYP, "Soft Channel")
}


record(ai, LEBT:SOL01_PS:IRdbk) {
  field(DESC, "Lecture Icons SOL01 PS")
  field(SCAN, "I/O Intr")
  field(DTYP, "asynFloat64")
  field(INP, "@asyn(modbus_S1:lect_bloc1 0)MODBUS_DATA")
  field(PREC, "1")
}


record(calc, LEBT:SOL01_PS:OnStat) {
  field(CALC, "A&B")
  field(SCAN, "2 second")
  field(INPA, "LEBT:SOL01_PS:Status PP")
  field(INPB, "1")
}

record(calc, LEBT:SOL01_PS:OffStat) {
  field(CALC, "(A&B)>>1")
  field(INPA, "LEBT:SOL01_PS:Status PP")
  field(INPB, "2")
}

record(calc, LEBT:SOL01_PS:RdyStat) {
  field(CALC, "(A&B)>>2")
  field(INPA, "LEBT:SOL01_PS:Status PP")
  field(INPB, "4")
}

record(bo, LEBT:SOL01_PS:ON) {
  field(DESC, "Cde ON SOL01")
  field(DTYP, "asynUInt32Digital")
  field(OMSL, "supervisory")
  field(HIGH, "2")
  field(OUT, "@asynMask(modbus_S1:ecr_Bit0 0 1 0)MODBUS_DATA")
}

record(bo, LEBT:SOL01_PS:OFF) {
  field(DESC, "Cde OFF SOL01")
  field(DTYP, "asynUInt32Digital")
  field(OMSL, "supervisory")
  field(HIGH, "2")
  field(OUT, "@asynMask(modbus_S1:ecr_Bit1 0 1 0)MODBUS_DATA")
}

record(bo, LEBT:SOL01_PS:RESET) {
  field(DESC, "Cde reset SOL01")
  field(DTYP, "asynUInt32Digital")
  field(OMSL, "supervisory")
  field(HIGH, "2")
  field(OUT, "@asynMask(modbus_S1:ecr_Bit2 0 1 0)MODBUS_DATA")
}




###################################################################
#
# --   OLD RECORDS (Gsub/aSub based)


#record(aSub, LEBT:SOL01_PS:GsubRamp) {
#  field(FLNK, "LEBT:SOL01_PS:WrtRamp")
#  field(EFLG, "ON CHANGE")
#  field(SNAM, "writeNMots")
#  field(INPA, "LEBT:SOL01_PS:Rampe")
#  field(FTA, "DOUBLE")
#  field(OUTA, "LEBT:SOL01_PS:WrtRamp")
#  field(FTVA, "USHORT")
#  field(SCAN, "Passive")
#  field(NOVA, "2")
#}

#record(aSub, LEBT:SOL01_PS:GsubIcons) {
#  field(FLNK, "LEBT:SOL01_PS:WrtIcons")
#  field(EFLG, "ON CHANGE")
#  field(SNAM, "writeNMots")
#  field(INPA, "LEBT:SOL01_PS:ISet")
#  field(FTA, "DOUBLE")
#  field(OUTA, "LEBT:SOL01_PS:WrtIcons")
#  field(FTVA, "USHORT")
#  field(OUTB, "LEBT:SOL01_PS:PretRampe")
#  field(FTVB, "USHORT")
#  field(SCAN, "Passive")
#  field(NOVA, "2")
#  field(PREC, "1")
#}

#record(waveform, LEBT:SOL01_PS:WrtIcons) {
#  field(DTYP, "asynInt32ArrayOut")
#  field(NELM, "2")
#  field(FTVL, "ULONG")
#  field(FLNK, "LEBT:SOL01_PS:PretRampe")
#  field(INP, "@asyn(modbus_S1:ecr_Icons 0 0)MODBUS_DATA")
#}


#record(waveform, LEBT:SOL01_PS:WrtRamp) {
#  field(DTYP, "asynInt32ArrayOut")
#  field(NELM, "2")
#  field(FTVL, "ULONG")
#  field(INP, "@asyn(modbus_S1:ecr_rampe 0 0)MODBUS_DATA")
#}


#record(waveform, LEBT:SOL01_PS:Readbloc1) {
#  field(DESC, "Lecture AI")
#  field(SCAN, "I/O Intr")
#  field(DTYP, "asynInt32ArrayIn")
#  field(INP, "@asyn(modbus_S1:lect_bloc1 0)MODBUS_DATA")
#  field(NELM, "2")
#  field(FTVL, "LONG")
#  field(FLNK, "LEBT:SOL01_PS:GsubRead")
#}

#record(aSub, LEBT:SOL01_PS:GsubRead) {
#  field(EFLG, "ON CHANGE")
#  field(SNAM, "readNMots")
#  field(INPA, "LEBT:SOL01_PS:Readbloc1")
#  field(FTA, "LONG")
#  field(OUTA, "LEBT:SOL01_PS:IRdbk")
#  field(FTVA, "FLOAT")
#  field(NOA, "2")
#  field(SCAN, "Passive")
#  field(FLNK, "LEBT:SOL01_PS:IRdbk")
#}
