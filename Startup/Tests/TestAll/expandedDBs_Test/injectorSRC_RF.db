#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBD("/home/ifmifmgr/topIFMIF/dbd/injector.dbd")
#! DBDEND


record(ao, SRC:RF_GEN:Pwr) {
  field(DESC, "ecriture Cde analog")
  field(DTYP, "Soft Channel")
  field(OMSL, "supervisory")
  field(DRVH, "1200")
  field(DRVL, "0")
  field(HOPR, "1200")
  field(LOPR, "0")
  field(FLNK, "SRC:RF_GEN:PwrSet")
}

record(ao, SRC:RF_GEN:Offset) {
  field(DESC, "ecriture Cde analog")
  field(DTYP, "Soft Channel")
  field(OMSL, "supervisory")
  field(DRVH, "1200")
  field(DRVL, "0")
  field(HOPR, "1200")
  field(LOPR, "0")
  field(FLNK, "SRC:RF_GEN:CalcOffset")
}

record(calc, SRC:RF_GEN:PwrSet) {
  field(FLNK, "SRC:RF_GEN:VRFcalcout")
  field(CALC, "A-B")
  field(INPA, "SRC:RF_GEN:Pwr")
  field(INPB, "SRC:RF_GEN:Offset")
}

record(calcout, SRC:RF_GEN:VRFcalcout) {
  field(DTYP, "Soft Channel")
  field(FLNK, "SRC:RF_GEN:VRFSet")
  field(CALC, "(A*B)/C")
  field(INPA, "SRC:RF_GEN:PwrSet")
  field(INPB, "30000")
  field(INPC, "1200")
  field(PREC, "2")
}

record(ao, SRC:RF_GEN:VRFSet) {
  field(DTYP, "asynInt32")
  field(OUT, "@asyn(modbus_HT:ecr_AO5 00)MODBUS_DATA")
  field(DOL, "SRC:RF_GEN:VRFcalcout")
  field(OMSL, "closed_loop")
  field(DRVH, "32000")
  field(DRVL, "0")
}

record(calcout, SRC:RF_GEN:CalcOffset) {
  field(DTYP, "Soft Channel")
  field(FLNK, "SRC:RF_GEN:VoffsetSet")
  field(CALC, "(A*B)/C")
  field(INPA, "SRC:RF_GEN:Offset")
  field(INPB, "30000")
  field(INPC, "1200")
  field(PREC, "2")
}

record(ao, SRC:RF_GEN:VoffsetSet) {
  field(DTYP, "asynInt32")
  field(OUT, "@asyn(modbus_HT:ecr_AO6 00)MODBUS_DATA")
  field(DOL, "SRC:RF_GEN:CalcOffset")
  field(OMSL, "closed_loop")
  field(DRVH, "32000")
  field(DRVL, "0")
}

#! Further lines contain data used by VisualDCT
#! View(0,0,0.9)
#! Record(SRC:RF_GEN:Pwr,300,70,0,1,"SRC:RF_GEN:Pwr")
#! Field("SRC:RF_GEN:Pwr.VAL",16777215,1,"SRC:RF_GEN:Pwr.VAL")
#! Field("SRC:RF_GEN:Pwr.FLNK",16777215,1,"SRC:RF_GEN:Pwr.FLNK")
#! Link("SRC:RF_GEN:Pwr.FLNK",SRC:RF_GEN:PwrSet)
#! Record(SRC:RF_GEN:Offset,40,750,0,1,"SRC:RF_GEN:Offset")
#! Field("SRC:RF_GEN:Offset.VAL",16777215,1,"SRC:RF_GEN:Offset.VAL")
#! Field("SRC:RF_GEN:Offset.FLNK",16777215,1,"SRC:RF_GEN:Offset.FLNK")
#! Link("SRC:RF_GEN:Offset.FLNK",SRC:RF_GEN:CalcOffset)
#! Record(SRC:RF_GEN:PwrSet,700,247,0,0,"SRC:RF_GEN:PwrSet")
#! Field("SRC:RF_GEN:PwrSet.INPA",16777215,0,"SRC:RF_GEN:PwrSet.INPA")
#! Link("SRC:RF_GEN:PwrSet.INPA","SRC:RF_GEN:Pwr.VAL")
#! Field("SRC:RF_GEN:PwrSet.INPB",16777215,0,"SRC:RF_GEN:PwrSet.INPB")
#! Link("SRC:RF_GEN:PwrSet.INPB","SRC:RF_GEN:Offset.VAL")
#! Field("SRC:RF_GEN:PwrSet.FLNK",16777215,1,"SRC:RF_GEN:PwrSet.FLNK")
#! Link("SRC:RF_GEN:PwrSet.FLNK",SRC:RF_GEN:VRFcalcout)
#! Field("SRC:RF_GEN:PwrSet.VAL",16777215,1,"SRC:RF_GEN:PwrSet.VAL")
#! Record(SRC:RF_GEN:VRFcalcout,1020,265,0,0,"SRC:RF_GEN:VRFcalcout")
#! Field("SRC:RF_GEN:VRFcalcout.FLNK",16777215,1,"SRC:RF_GEN:VRFcalcout.FLNK")
#! Link("SRC:RF_GEN:VRFcalcout.FLNK",SRC:RF_GEN:VRFSet)
#! Field("SRC:RF_GEN:VRFcalcout.INPA",16777215,0,"SRC:RF_GEN:VRFcalcout.INPA")
#! Link("SRC:RF_GEN:VRFcalcout.INPA","SRC:RF_GEN:PwrSet.VAL")
#! Field("SRC:RF_GEN:VRFcalcout.VAL",16777215,0,"SRC:RF_GEN:VRFcalcout.VAL")
#! Record(SRC:RF_GEN:VRFSet,1280,319,0,0,"SRC:RF_GEN:VRFSet")
#! Field("SRC:RF_GEN:VRFSet.DOL",16777215,0,"SRC:RF_GEN:VRFSet.DOL")
#! Link("SRC:RF_GEN:VRFSet.DOL","SRC:RF_GEN:VRFcalcout.VAL")
#! Record(SRC:RF_GEN:CalcOffset,980,545,0,0,"SRC:RF_GEN:CalcOffset")
#! Field("SRC:RF_GEN:CalcOffset.FLNK",16777215,0,"SRC:RF_GEN:CalcOffset.FLNK")
#! Link("SRC:RF_GEN:CalcOffset.FLNK",SRC:RF_GEN:VoffsetSet)
#! Field("SRC:RF_GEN:CalcOffset.INPA",16777215,0,"SRC:RF_GEN:CalcOffset.INPA")
#! Link("SRC:RF_GEN:CalcOffset.INPA","SRC:RF_GEN:Offset.VAL")
#! Field("SRC:RF_GEN:CalcOffset.VAL",16777215,0,"SRC:RF_GEN:CalcOffset.VAL")
#! Record(SRC:RF_GEN:VoffsetSet,320,419,0,1,"SRC:RF_GEN:VoffsetSet")
#! Field("SRC:RF_GEN:VoffsetSet.DOL",16777215,1,"SRC:RF_GEN:VoffsetSet.DOL")
#! Link("SRC:RF_GEN:VoffsetSet.DOL","SRC:RF_GEN:CalcOffset.VAL")
