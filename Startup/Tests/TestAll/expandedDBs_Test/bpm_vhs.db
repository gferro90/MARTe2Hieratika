###############################################################
# BPM vhs registers for board BPM_VHS01
###############################################################

record(bo, "BI:BPM_VHS01:FReadCmd") {
   field(DESC, "Fast reading of signals")
   field(DTYP, "asynInt32")
   field(OUT,  "@asyn(BPM_VHS1,0)FReadCmd")
   field(SCAN, ".1 second")
   field(FLNK, "BI:BPM_VHS01:CalcCmd")
}

record(bo, "BI:BPM_VHS01:SReadCmd") {
   field(DESC, "Slow reading of signals")
   field(DTYP, "asynInt32")
   field(OUT,  "@asyn(BPM_VHS1,0)SReadCmd")
   field(SCAN, "2 second")
}

record(bo, "BI:BPM_VHS01:StartCmd") {
   field(DESC, "Start command")
   field(DTYP, "asynInt32")
   field(OUT,  "@asyn(BPM_VHS1,0)StartCmd")
   field(ZNAM, "No command")
   field(ONAM, "Start")
}

record(bo, "BI:BPM_VHS01:StopCmd") {
   field(DESC, "Stop command")
   field(DTYP, "asynInt32")
   field(OUT,  "@asyn(BPM_VHS1,0)StopCmd")
   field(ZNAM, "No command")
   field(ONAM, "Stop")
}

record(bi, "BI:BPM_VHS01:RunStat") {
   field(DESC, "Running status")
   field(DTYP, "asynInt32")
   field(INP,  "@asyn(BPM_VHS1,0)RunStat")
   field(SCAN,"I/O Intr")
   field(ZNAM, "Off")
   field(ONAM, "On")
}

record(mbbi, "BI:BPM_VHS01:Clock") {
   field(DESC, "Clock source")
   field(DTYP, "asynInt32")
   field(INP,  "@asyn(BPM_VHS1,0)Clock")
   field(SCAN,"I/O Intr")
  #Onboard clock
   field(ZRVL, "0")
   field(ZRST, "ONBOARD")
  #External front panel clock
   field(ONVL, "1")
   field(ONST, "EXTERNAL_FRONT")
  # Onboard divided clock
   field(TWVL, "2")
   field(TWST, "ONBOARD_DIVIDED")
  # Invalid clock
   field(THVL, "3")
   field(THST, "RESERVED")
  # Clock received from FPDP
   field(FRVL, "4")
   field(FRST, "FPDP_RECEIVE")
  # RapidCHANNEL clock
   field(FVVL, "5")
   field(FVST, "RAPIDCHANNEL")
  # Clock received from DIF
   field(SXVL, "6")
   field(SXST, "DIF_RECEIVE")
  # Clock generated by the FPGA
   field(SVVL, "7")
   field(SVST, "FPGA_GENERATED")
  # Invalid clock
   field(EIVL, "8")
   field(EIST, "RESERVED_ERROR")
}

record(mbbo, "BI:BPM_VHS01:ClockSet") {
   field(DESC, "Sets clock source")
   field(DTYP, "asynInt32")
   field(OUT,  "@asyn(BPM_VHS1,0)ClockSet")
  #Onboard clock
   field(ZRVL, "0")
   field(ZRST, "ONBOARD")
  #External front panel clock
   field(ONVL, "1")
   field(ONST, "EXTERNAL_FRONT")
}

record(bi, "BI:BPM_VHS01:DCMsStat") {
   field(DESC, "Digital Clock Managers lock status")
   field(DTYP, "asynInt32")
   field(INP,  "@asyn(BPM_VHS1,0)DCMsStat")
   field(SCAN, "I/O Intr")
   field(ZNAM, "Unlocked")
   field(ONAM, "Locked")
}

record(mbbo, "BI:BPM_VHS01:AvgSizeSet") {
   field(DESC, "Sets moving averaging window size")
   field(DTYP, "asynInt32")
   field(OUT,  "@asyn(BPM_VHS1,0)AvgSizeSet")
   field(ZRVL, "7")
   field(ZRST, "128 samples")
   field(ONVL, "8")
   field(ONST, "256 samples")
   field(TWVL, "9")
   field(TWST, "512 samples")
   field(THVL, "10")
   field(THST, "1024 samples")
   field(FRVL, "11")
   field(FRST, "2048 samples")
   field(FVVL, "12")
   field(FVST, "4096 samples")
   field(SXVL, "13")
   field(SXST, "8192 samples")
   field(SVVL, "14")
   field(SVST, "16384 samples")
   field(EIVL, "15")
   field(EIST, "32768 samples")
   field(NIVL, "16")
   field(NIST, "65536 samples")
}

record(mbbi, "BI:BPM_VHS01:AvgSize") {
   field(DESC, "Moving averaging window size")
   field(DTYP, "asynInt32")
   field(SCAN,"I/O Intr")
   field(INP,  "@asyn(BPM_VHS1,0)AvgSize")
   field(ZRVL, "7")
   field(ZRST, "128 samples")
   field(ONVL, "8")
   field(ONST, "256 samples")
   field(TWVL, "9")
   field(TWST, "512 samples")
   field(THVL, "10")
   field(THST, "1024 samples")
   field(FRVL, "11")
   field(FRST, "2048 samples")
   field(FVVL, "12")
   field(FVST, "4096 samples")
   field(SXVL, "13")
   field(SXST, "8192 samples")
   field(SVVL, "14")
   field(SVST, "16384 samples")
   field(EIVL, "15")
   field(EIST, "32768 samples")
   field(NIVL, "16")
   field(NIST, "65536 samples")
}

record(longin, "BI:BPM_VHS01:OutOfRange") {
   field(DESC, "ADC out-of-range bits (overflow status)")
   field(DTYP, "asynInt32")
   field(SCAN,"I/O Intr")
   field(INP,  "@asyn(BPM_VHS1,0)OutOfRange")
}

record(fanout, "BI:BPM_VHS01:CalcCmd") {
	field(DESC, "Trigger calculus after acquisition")
	field(LNK1, "MEBT:BPM01:PosX.PROC PP")
	field(LNK2, "MEBT:BPM02:PosX.PROC PP")
	field(LNK3, "MEBT:BPM03:PosX.PROC PP")
	field(LNK4, "MEBT:BPM04:PosX.PROC PP")
}

record(bi, "BI:BPM_VHS01:AcqMode") {
   field(DESC, "CW or Pulsed beam acquisition mode")
   field(DTYP, "asynInt32")
   field(SCAN,"I/O Intr")
   field(INP,  "@asyn(BPM_VHS1,0)AcqMode")
   field(ZNAM, "Pulsed beam")
   field(ONAM, "CW")
}

record(bo, "BI:BPM_VHS01:AcqModeSet") {
   field(DESC, "Sets CW or Pulsed beam acquisition mode")
   field(DTYP, "asynInt32")
   field(OUT,  "@asyn(BPM_VHS1,0)AcqModeSet")
   field(ZNAM, "Pulsed beam")
   field(ONAM, "CW")
}

# Acquisition Delay
record(ai,"BI:BPM_VHS01:Delay")
{
	field(DESC, "Acquisition delay in Pulsed beam mode")
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,0)Delay")
	field(EGU, "ns")
	field(LINR, "SLOPE")
	field(ESLO, "11.42857")
	field(EOFF, "0")
	field(PREC, "0")
}
record(ao,"BI:BPM_VHS01:DelaySet")
{
	field(DESC, "Sets acq. delay in Pulsed beam mode")
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS1,0)DelaySet")
	field(DRVL, "0")
	field(DRVH, "748971")
	field(EGU, "ns")
	field(LINR, "SLOPE")
	field(ESLO, "11.42857")
	field(EOFF, "0")
	field(PREC, "0")
}

record(bi, "BI:BPM_VHS01:AvgMode") {
   field(DESC, "Averaged acquisition mode")
   field(DTYP, "asynInt32")
   field(SCAN,"I/O Intr")
   field(INP,  "@asyn(BPM_VHS1,0)AvgMode")
   field(ZNAM, "No averaged")
   field(ONAM, "Averaged")
}

record(bo, "BI:BPM_VHS01:AvgModeSet") {
   field(DESC, "Sets averaged acquisition mode")
   field(DTYP, "asynInt32")
   field(OUT,  "@asyn(BPM_VHS1,0)AvgModeSet")
   field(ZNAM, "No averaged")
   field(ONAM, "Averaged")
}
###############################################################
# BPM vhs registers for board BPM_VHS02
###############################################################

record(bo, "BI:BPM_VHS02:FReadCmd") {
   field(DESC, "Fast reading of signals")
   field(DTYP, "asynInt32")
   field(OUT,  "@asyn(BPM_VHS2,0)FReadCmd")
   field(SCAN, ".1 second")
   field(FLNK, "BI:BPM_VHS02:CalcCmd")
}

record(bo, "BI:BPM_VHS02:SReadCmd") {
   field(DESC, "Slow reading of signals")
   field(DTYP, "asynInt32")
   field(OUT,  "@asyn(BPM_VHS2,0)SReadCmd")
   field(SCAN, "2 second")
}

record(bo, "BI:BPM_VHS02:StartCmd") {
   field(DESC, "Start command")
   field(DTYP, "asynInt32")
   field(OUT,  "@asyn(BPM_VHS2,0)StartCmd")
   field(ZNAM, "No command")
   field(ONAM, "Start")
}

record(bo, "BI:BPM_VHS02:StopCmd") {
   field(DESC, "Stop command")
   field(DTYP, "asynInt32")
   field(OUT,  "@asyn(BPM_VHS2,0)StopCmd")
   field(ZNAM, "No command")
   field(ONAM, "Stop")
}

record(bi, "BI:BPM_VHS02:RunStat") {
   field(DESC, "Running status")
   field(DTYP, "asynInt32")
   field(INP,  "@asyn(BPM_VHS2,0)RunStat")
   field(SCAN,"I/O Intr")
   field(ZNAM, "Off")
   field(ONAM, "On")
}

record(mbbi, "BI:BPM_VHS02:Clock") {
   field(DESC, "Clock source")
   field(DTYP, "asynInt32")
   field(INP,  "@asyn(BPM_VHS2,0)Clock")
   field(SCAN,"I/O Intr")
  #Onboard clock
   field(ZRVL, "0")
   field(ZRST, "ONBOARD")
  #External front panel clock
   field(ONVL, "1")
   field(ONST, "EXTERNAL_FRONT")
  # Onboard divided clock
   field(TWVL, "2")
   field(TWST, "ONBOARD_DIVIDED")
  # Invalid clock
   field(THVL, "3")
   field(THST, "RESERVED")
  # Clock received from FPDP
   field(FRVL, "4")
   field(FRST, "FPDP_RECEIVE")
  # RapidCHANNEL clock
   field(FVVL, "5")
   field(FVST, "RAPIDCHANNEL")
  # Clock received from DIF
   field(SXVL, "6")
   field(SXST, "DIF_RECEIVE")
  # Clock generated by the FPGA
   field(SVVL, "7")
   field(SVST, "FPGA_GENERATED")
  # Invalid clock
   field(EIVL, "8")
   field(EIST, "RESERVED_ERROR")
}

record(mbbo, "BI:BPM_VHS02:ClockSet") {
   field(DESC, "Sets clock source")
   field(DTYP, "asynInt32")
   field(OUT,  "@asyn(BPM_VHS2,0)ClockSet")
  #Onboard clock
   field(ZRVL, "0")
   field(ZRST, "ONBOARD")
  #External front panel clock
   field(ONVL, "1")
   field(ONST, "EXTERNAL_FRONT")
}

record(bi, "BI:BPM_VHS02:DCMsStat") {
   field(DESC, "Digital Clock Managers lock status")
   field(DTYP, "asynInt32")
   field(INP,  "@asyn(BPM_VHS2,0)DCMsStat")
   field(SCAN, "I/O Intr")
   field(ZNAM, "Unlocked")
   field(ONAM, "Locked")
}

record(mbbo, "BI:BPM_VHS02:AvgSizeSet") {
   field(DESC, "Sets moving averaging window size")
   field(DTYP, "asynInt32")
   field(OUT,  "@asyn(BPM_VHS2,0)AvgSizeSet")
   field(ZRVL, "7")
   field(ZRST, "128 samples")
   field(ONVL, "8")
   field(ONST, "256 samples")
   field(TWVL, "9")
   field(TWST, "512 samples")
   field(THVL, "10")
   field(THST, "1024 samples")
   field(FRVL, "11")
   field(FRST, "2048 samples")
   field(FVVL, "12")
   field(FVST, "4096 samples")
   field(SXVL, "13")
   field(SXST, "8192 samples")
   field(SVVL, "14")
   field(SVST, "16384 samples")
   field(EIVL, "15")
   field(EIST, "32768 samples")
   field(NIVL, "16")
   field(NIST, "65536 samples")
}

record(mbbi, "BI:BPM_VHS02:AvgSize") {
   field(DESC, "Moving averaging window size")
   field(DTYP, "asynInt32")
   field(SCAN,"I/O Intr")
   field(INP,  "@asyn(BPM_VHS2,0)AvgSize")
   field(ZRVL, "7")
   field(ZRST, "128 samples")
   field(ONVL, "8")
   field(ONST, "256 samples")
   field(TWVL, "9")
   field(TWST, "512 samples")
   field(THVL, "10")
   field(THST, "1024 samples")
   field(FRVL, "11")
   field(FRST, "2048 samples")
   field(FVVL, "12")
   field(FVST, "4096 samples")
   field(SXVL, "13")
   field(SXST, "8192 samples")
   field(SVVL, "14")
   field(SVST, "16384 samples")
   field(EIVL, "15")
   field(EIST, "32768 samples")
   field(NIVL, "16")
   field(NIST, "65536 samples")
}

record(longin, "BI:BPM_VHS02:OutOfRange") {
   field(DESC, "ADC out-of-range bits (overflow status)")
   field(DTYP, "asynInt32")
   field(SCAN,"I/O Intr")
   field(INP,  "@asyn(BPM_VHS2,0)OutOfRange")
}

record(fanout, "BI:BPM_VHS02:CalcCmd") {
	field(DESC, "Trigger calculus after acquisition")
	field(LNK1, "DPLA:BPM01:PosX.PROC PP")
	field(LNK2, "DPLA:BPM02:PosX.PROC PP")
	field(LNK3, "DPLA:BPM03:PosX.PROC PP")
	field(LNK4, "SRF:BPM01:PosX.PROC PP")
}

record(bi, "BI:BPM_VHS02:AcqMode") {
   field(DESC, "CW or Pulsed beam acquisition mode")
   field(DTYP, "asynInt32")
   field(SCAN,"I/O Intr")
   field(INP,  "@asyn(BPM_VHS2,0)AcqMode")
   field(ZNAM, "Pulsed beam")
   field(ONAM, "CW")
}

record(bo, "BI:BPM_VHS02:AcqModeSet") {
   field(DESC, "Sets CW or Pulsed beam acquisition mode")
   field(DTYP, "asynInt32")
   field(OUT,  "@asyn(BPM_VHS2,0)AcqModeSet")
   field(ZNAM, "Pulsed beam")
   field(ONAM, "CW")
}

# Acquisition Delay
record(ai,"BI:BPM_VHS02:Delay")
{
	field(DESC, "Acquisition delay in Pulsed beam mode")
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,0)Delay")
	field(EGU, "ns")
	field(LINR, "SLOPE")
	field(ESLO, "11.42857")
	field(EOFF, "0")
	field(PREC, "0")
}
record(ao,"BI:BPM_VHS02:DelaySet")
{
	field(DESC, "Sets acq. delay in Pulsed beam mode")
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS2,0)DelaySet")
	field(DRVL, "0")
	field(DRVH, "748971")
	field(EGU, "ns")
	field(LINR, "SLOPE")
	field(ESLO, "11.42857")
	field(EOFF, "0")
	field(PREC, "0")
}

record(bi, "BI:BPM_VHS02:AvgMode") {
   field(DESC, "Averaged acquisition mode")
   field(DTYP, "asynInt32")
   field(SCAN,"I/O Intr")
   field(INP,  "@asyn(BPM_VHS2,0)AvgMode")
   field(ZNAM, "No averaged")
   field(ONAM, "Averaged")
}

record(bo, "BI:BPM_VHS02:AvgModeSet") {
   field(DESC, "Sets averaged acquisition mode")
   field(DTYP, "asynInt32")
   field(OUT,  "@asyn(BPM_VHS2,0)AvgModeSet")
   field(ZNAM, "No averaged")
   field(ONAM, "Averaged")
}
###############################################################
# BPM vhs registers for BPM01 station in MEBT subsystem
###############################################################

#
# SIGNAL MEASUREMENTS
#

# TOP BUTTON
record(ai,"MEBT:BPM01_T:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,3)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"MEBT:BPM01_T:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,3)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"MEBT:BPM01_T:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,3)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"MEBT:BPM01_T:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,3)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# BOTTOM BUTTON
record(ai,"MEBT:BPM01_B:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,4)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM01_B:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,4)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM01_B:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,4)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM01_B:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,4)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# RIGHT BUTTON
record(ai,"MEBT:BPM01_R:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,1)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM01_R:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,1)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM01_R:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,1)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM01_R:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,1)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# LEFT BUTTON
record(ai,"MEBT:BPM01_L:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,2)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM01_L:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,2)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM01_L:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,2)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM01_L:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,2)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
	field(FLNK, "MEBT:BPM01_T:A")
}

####################
#
# GAINS
#
## Readbacks
record(ai,"MEBT:BPM01_T:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,3)Gain")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(EGU, "dB")
	field(PREC, "1")
}
record(ai,"MEBT:BPM01_B:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,4)Gain")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(EGU, "dB")
	field(PREC, "1")
}
record(ai,"MEBT:BPM01_R:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,1)Gain")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ai,"MEBT:BPM01_L:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,2)Gain")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
## Settings
record(ao,"MEBT:BPM01_T:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS1,3)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"MEBT:BPM01_B:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS1,4)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"MEBT:BPM01_R:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS1,1)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"MEBT:BPM01_L:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS1,2)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}

###########################
#
# CORRECTED CHANNEL CALCULATIONS
#

record(calc,"MEBT:BPM01_T:A")
{
	field(INPA, "MEBT:BPM01_T:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM01_B:A")
}

record(calc,"MEBT:BPM01_B:A")
{
	field(INPA, "MEBT:BPM01_B:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)	
	field(FLNK, "MEBT:BPM01_R:A")
}

record(calc,"MEBT:BPM01_R:A")
{
	field(INPA, "MEBT:BPM01_R:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM01_L:A")
}

record(calc,"MEBT:BPM01_L:A")
{
	field(INPA, "MEBT:BPM01_L:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM01_T:Phas")
}

record(calc,"MEBT:BPM01_T:Phas")
{
	field(INPA, "MEBT:BPM01_T:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM01_B:Phas")
}

record(calc,"MEBT:BPM01_B:Phas")
{
	field(INPA, "MEBT:BPM01_B:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM01_R:Phas")
}

record(calc,"MEBT:BPM01_R:Phas")
{
	field(INPA, "MEBT:BPM01_R:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM01_L:Phas")
}

record(calc,"MEBT:BPM01_L:Phas")
{
	field(INPA, "MEBT:BPM01_L:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM01:PosX")
}

###########################
#
# POSITION AND ENERGY CALCULATIONS
#

record(calc, "MEBT:BPM01:PosX")
{
	field(DESC, "Horizontal BPM position")
	field(INPA, "MEBT:BPM01_T:A")
	field(INPB, "MEBT:BPM01_B:A")
	field(INPC, "MEBT:BPM01_R:A")
	field(INPD, "MEBT:BPM01_L:A")
	field(INPE, "25")
	field(INPF, "0")
	field(CALC, "E*(C-D)/(A+B+C+D)+F")
	field(EGU, "mm")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM01:PosY")
}

record(calc, "MEBT:BPM01:PosY")
{
	field(DESC, "Vertical BPM position")
	field(INPA, "MEBT:BPM01_T:A")
	field(INPB, "MEBT:BPM01_B:A")
	field(INPC, "MEBT:BPM01_R:A")
	field(INPD, "MEBT:BPM01_L:A")
	field(INPE, "25")
	field(INPF, "0")
	field(CALC, "E*(A-B)/(A+B+C+D)+F")
	field(EGU, "mm")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM01:Sum")
#	field(FLNK, "MEBT:BPM01:PosY")
}

record(calc, "MEBT:BPM01:Sum")
{
	field(DESC, "MEBT:BPM01 Sum")
	field(INPA, "MEBT:BPM01_T:A")
	field(INPB, "MEBT:BPM01_B:A")
	field(INPC, "MEBT:BPM01_R:A")
	field(INPD, "MEBT:BPM01_L:A")
	field(CALC, "A+B+C+D")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM01:I")
}

record(calc, "MEBT:BPM01:I")
{
	field(DESC, "MEBT:BPM01 current")
	field(INPA, "MEBT:BPM01_T:A")
	field(INPB, "MEBT:BPM01_B:A")
	field(INPC, "MEBT:BPM01_R:A")
	field(INPD, "MEBT:BPM01_L:A")
	field(INPE, "1")
	field(CALC, "(A+B+C+D)*E+F")
	field(INPF, "0")
	field(EGU, "mA")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM01:MeanPhas")
}

record(calc, "MEBT:BPM01:MeanPhas")
{
	field(DESC, "Mean Phase MEBT:BPM01")
	field(INPA, "MEBT:BPM01_T:Phas")
	field(INPB, "MEBT:BPM01_B:Phas")
	field(INPC, "MEBT:BPM01_R:Phas")
	field(INPD, "MEBT:BPM01_L:Phas")
	field(CALC, "(A+B+C+D)/4.0")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM01:RelPhas")
}



###############################################################
# BPM vhs registers for BPM02 station in MEBT subsystem
###############################################################

#
# SIGNAL MEASUREMENTS
#

# TOP BUTTON
record(ai,"MEBT:BPM02_T:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,7)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"MEBT:BPM02_T:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,7)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"MEBT:BPM02_T:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,7)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"MEBT:BPM02_T:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,7)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# BOTTOM BUTTON
record(ai,"MEBT:BPM02_B:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,8)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM02_B:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,8)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM02_B:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,8)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM02_B:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,8)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# RIGHT BUTTON
record(ai,"MEBT:BPM02_R:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,5)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM02_R:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,5)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM02_R:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,5)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM02_R:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,5)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# LEFT BUTTON
record(ai,"MEBT:BPM02_L:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,6)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM02_L:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,6)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM02_L:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,6)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM02_L:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,6)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
	field(FLNK, "MEBT:BPM02_T:A")
}

####################
#
# GAINS
#
## Readbacks
record(ai,"MEBT:BPM02_T:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,7)Gain")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(EGU, "dB")
	field(PREC, "1")
}
record(ai,"MEBT:BPM02_B:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,8)Gain")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(EGU, "dB")
	field(PREC, "1")
}
record(ai,"MEBT:BPM02_R:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,5)Gain")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ai,"MEBT:BPM02_L:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,6)Gain")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
## Settings
record(ao,"MEBT:BPM02_T:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS1,7)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"MEBT:BPM02_B:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS1,8)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"MEBT:BPM02_R:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS1,5)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"MEBT:BPM02_L:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS1,6)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}

###########################
#
# CORRECTED CHANNEL CALCULATIONS
#

record(calc,"MEBT:BPM02_T:A")
{
	field(INPA, "MEBT:BPM02_T:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM02_B:A")
}

record(calc,"MEBT:BPM02_B:A")
{
	field(INPA, "MEBT:BPM02_B:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)	
	field(FLNK, "MEBT:BPM02_R:A")
}

record(calc,"MEBT:BPM02_R:A")
{
	field(INPA, "MEBT:BPM02_R:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM02_L:A")
}

record(calc,"MEBT:BPM02_L:A")
{
	field(INPA, "MEBT:BPM02_L:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM02_T:Phas")
}

record(calc,"MEBT:BPM02_T:Phas")
{
	field(INPA, "MEBT:BPM02_T:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM02_B:Phas")
}

record(calc,"MEBT:BPM02_B:Phas")
{
	field(INPA, "MEBT:BPM02_B:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM02_R:Phas")
}

record(calc,"MEBT:BPM02_R:Phas")
{
	field(INPA, "MEBT:BPM02_R:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM02_L:Phas")
}

record(calc,"MEBT:BPM02_L:Phas")
{
	field(INPA, "MEBT:BPM02_L:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM02:PosX")
}

###########################
#
# POSITION AND ENERGY CALCULATIONS
#

record(calc, "MEBT:BPM02:PosX")
{
	field(DESC, "Horizontal BPM position")
	field(INPA, "MEBT:BPM02_T:A")
	field(INPB, "MEBT:BPM02_B:A")
	field(INPC, "MEBT:BPM02_R:A")
	field(INPD, "MEBT:BPM02_L:A")
	field(INPE, "25")
	field(INPF, "0")
	field(CALC, "E*(C-D)/(A+B+C+D)+F")
	field(EGU, "mm")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM02:PosY")
}

record(calc, "MEBT:BPM02:PosY")
{
	field(DESC, "Vertical BPM position")
	field(INPA, "MEBT:BPM02_T:A")
	field(INPB, "MEBT:BPM02_B:A")
	field(INPC, "MEBT:BPM02_R:A")
	field(INPD, "MEBT:BPM02_L:A")
	field(INPE, "25")
	field(INPF, "0")
	field(CALC, "E*(A-B)/(A+B+C+D)+F")
	field(EGU, "mm")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM02:Sum")
#	field(FLNK, "MEBT:BPM02:PosY")
}

record(calc, "MEBT:BPM02:Sum")
{
	field(DESC, "MEBT:BPM02 Sum")
	field(INPA, "MEBT:BPM02_T:A")
	field(INPB, "MEBT:BPM02_B:A")
	field(INPC, "MEBT:BPM02_R:A")
	field(INPD, "MEBT:BPM02_L:A")
	field(CALC, "A+B+C+D")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM02:I")
}

record(calc, "MEBT:BPM02:I")
{
	field(DESC, "MEBT:BPM02 current")
	field(INPA, "MEBT:BPM02_T:A")
	field(INPB, "MEBT:BPM02_B:A")
	field(INPC, "MEBT:BPM02_R:A")
	field(INPD, "MEBT:BPM02_L:A")
	field(INPE, "1")
	field(CALC, "(A+B+C+D)*E+F")
	field(INPF, "0")
	field(EGU, "mA")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM02:MeanPhas")
}

record(calc, "MEBT:BPM02:MeanPhas")
{
	field(DESC, "Mean Phase MEBT:BPM02")
	field(INPA, "MEBT:BPM02_T:Phas")
	field(INPB, "MEBT:BPM02_B:Phas")
	field(INPC, "MEBT:BPM02_R:Phas")
	field(INPD, "MEBT:BPM02_L:Phas")
	field(CALC, "(A+B+C+D)/4.0")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM02:RelPhas")
}



###############################################################
# BPM vhs registers for BPM03 station in MEBT subsystem
###############################################################

#
# SIGNAL MEASUREMENTS
#

# TOP BUTTON
record(ai,"MEBT:BPM03_T:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,11)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"MEBT:BPM03_T:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,11)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"MEBT:BPM03_T:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,11)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"MEBT:BPM03_T:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,11)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# BOTTOM BUTTON
record(ai,"MEBT:BPM03_B:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,12)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM03_B:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,12)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM03_B:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,12)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM03_B:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,12)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# RIGHT BUTTON
record(ai,"MEBT:BPM03_R:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,9)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM03_R:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,9)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM03_R:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,9)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM03_R:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,9)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# LEFT BUTTON
record(ai,"MEBT:BPM03_L:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,10)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM03_L:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,10)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM03_L:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,10)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM03_L:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,10)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
	field(FLNK, "MEBT:BPM03_T:A")
}

####################
#
# GAINS
#
## Readbacks
record(ai,"MEBT:BPM03_T:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,11)Gain")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(EGU, "dB")
	field(PREC, "1")
}
record(ai,"MEBT:BPM03_B:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,12)Gain")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(EGU, "dB")
	field(PREC, "1")
}
record(ai,"MEBT:BPM03_R:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,9)Gain")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ai,"MEBT:BPM03_L:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,10)Gain")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
## Settings
record(ao,"MEBT:BPM03_T:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS1,11)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"MEBT:BPM03_B:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS1,12)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"MEBT:BPM03_R:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS1,9)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"MEBT:BPM03_L:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS1,10)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}

###########################
#
# CORRECTED CHANNEL CALCULATIONS
#

record(calc,"MEBT:BPM03_T:A")
{
	field(INPA, "MEBT:BPM03_T:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM03_B:A")
}

record(calc,"MEBT:BPM03_B:A")
{
	field(INPA, "MEBT:BPM03_B:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)	
	field(FLNK, "MEBT:BPM03_R:A")
}

record(calc,"MEBT:BPM03_R:A")
{
	field(INPA, "MEBT:BPM03_R:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM03_L:A")
}

record(calc,"MEBT:BPM03_L:A")
{
	field(INPA, "MEBT:BPM03_L:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM03_T:Phas")
}

record(calc,"MEBT:BPM03_T:Phas")
{
	field(INPA, "MEBT:BPM03_T:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM03_B:Phas")
}

record(calc,"MEBT:BPM03_B:Phas")
{
	field(INPA, "MEBT:BPM03_B:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM03_R:Phas")
}

record(calc,"MEBT:BPM03_R:Phas")
{
	field(INPA, "MEBT:BPM03_R:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM03_L:Phas")
}

record(calc,"MEBT:BPM03_L:Phas")
{
	field(INPA, "MEBT:BPM03_L:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM03:PosX")
}

###########################
#
# POSITION AND ENERGY CALCULATIONS
#

record(calc, "MEBT:BPM03:PosX")
{
	field(DESC, "Horizontal BPM position")
	field(INPA, "MEBT:BPM03_T:A")
	field(INPB, "MEBT:BPM03_B:A")
	field(INPC, "MEBT:BPM03_R:A")
	field(INPD, "MEBT:BPM03_L:A")
	field(INPE, "25")
	field(INPF, "0")
	field(CALC, "E*(C-D)/(A+B+C+D)+F")
	field(EGU, "mm")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM03:PosY")
}

record(calc, "MEBT:BPM03:PosY")
{
	field(DESC, "Vertical BPM position")
	field(INPA, "MEBT:BPM03_T:A")
	field(INPB, "MEBT:BPM03_B:A")
	field(INPC, "MEBT:BPM03_R:A")
	field(INPD, "MEBT:BPM03_L:A")
	field(INPE, "25")
	field(INPF, "0")
	field(CALC, "E*(A-B)/(A+B+C+D)+F")
	field(EGU, "mm")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM03:Sum")
#	field(FLNK, "MEBT:BPM03:PosY")
}

record(calc, "MEBT:BPM03:Sum")
{
	field(DESC, "MEBT:BPM03 Sum")
	field(INPA, "MEBT:BPM03_T:A")
	field(INPB, "MEBT:BPM03_B:A")
	field(INPC, "MEBT:BPM03_R:A")
	field(INPD, "MEBT:BPM03_L:A")
	field(CALC, "A+B+C+D")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM03:I")
}

record(calc, "MEBT:BPM03:I")
{
	field(DESC, "MEBT:BPM03 current")
	field(INPA, "MEBT:BPM03_T:A")
	field(INPB, "MEBT:BPM03_B:A")
	field(INPC, "MEBT:BPM03_R:A")
	field(INPD, "MEBT:BPM03_L:A")
	field(INPE, "1")
	field(CALC, "(A+B+C+D)*E+F")
	field(INPF, "0")
	field(EGU, "mA")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM03:MeanPhas")
}

record(calc, "MEBT:BPM03:MeanPhas")
{
	field(DESC, "Mean Phase MEBT:BPM03")
	field(INPA, "MEBT:BPM03_T:Phas")
	field(INPB, "MEBT:BPM03_B:Phas")
	field(INPC, "MEBT:BPM03_R:Phas")
	field(INPD, "MEBT:BPM03_L:Phas")
	field(CALC, "(A+B+C+D)/4.0")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM03:RelPhas")
}



###############################################################
# BPM vhs registers for BPM04 station in MEBT subsystem
###############################################################

#
# SIGNAL MEASUREMENTS
#

# TOP BUTTON
record(ai,"MEBT:BPM04_T:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,15)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"MEBT:BPM04_T:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,15)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"MEBT:BPM04_T:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,15)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"MEBT:BPM04_T:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,15)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# BOTTOM BUTTON
record(ai,"MEBT:BPM04_B:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,16)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM04_B:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,16)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM04_B:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,16)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM04_B:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,16)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# RIGHT BUTTON
record(ai,"MEBT:BPM04_R:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,13)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM04_R:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,13)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM04_R:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,13)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM04_R:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,13)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# LEFT BUTTON
record(ai,"MEBT:BPM04_L:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,14)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM04_L:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,14)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM04_L:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,14)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"MEBT:BPM04_L:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,14)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
	field(FLNK, "MEBT:BPM04_T:A")
}

####################
#
# GAINS
#
## Readbacks
record(ai,"MEBT:BPM04_T:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,15)Gain")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(EGU, "dB")
	field(PREC, "1")
}
record(ai,"MEBT:BPM04_B:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,16)Gain")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(EGU, "dB")
	field(PREC, "1")
}
record(ai,"MEBT:BPM04_R:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,13)Gain")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ai,"MEBT:BPM04_L:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS1,14)Gain")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
## Settings
record(ao,"MEBT:BPM04_T:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS1,15)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"MEBT:BPM04_B:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS1,16)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"MEBT:BPM04_R:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS1,13)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"MEBT:BPM04_L:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS1,14)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}

###########################
#
# CORRECTED CHANNEL CALCULATIONS
#

record(calc,"MEBT:BPM04_T:A")
{
	field(INPA, "MEBT:BPM04_T:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM04_B:A")
}

record(calc,"MEBT:BPM04_B:A")
{
	field(INPA, "MEBT:BPM04_B:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)	
	field(FLNK, "MEBT:BPM04_R:A")
}

record(calc,"MEBT:BPM04_R:A")
{
	field(INPA, "MEBT:BPM04_R:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM04_L:A")
}

record(calc,"MEBT:BPM04_L:A")
{
	field(INPA, "MEBT:BPM04_L:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM04_T:Phas")
}

record(calc,"MEBT:BPM04_T:Phas")
{
	field(INPA, "MEBT:BPM04_T:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM04_B:Phas")
}

record(calc,"MEBT:BPM04_B:Phas")
{
	field(INPA, "MEBT:BPM04_B:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM04_R:Phas")
}

record(calc,"MEBT:BPM04_R:Phas")
{
	field(INPA, "MEBT:BPM04_R:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM04_L:Phas")
}

record(calc,"MEBT:BPM04_L:Phas")
{
	field(INPA, "MEBT:BPM04_L:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM04:PosX")
}

###########################
#
# POSITION AND ENERGY CALCULATIONS
#

record(calc, "MEBT:BPM04:PosX")
{
	field(DESC, "Horizontal BPM position")
	field(INPA, "MEBT:BPM04_T:A")
	field(INPB, "MEBT:BPM04_B:A")
	field(INPC, "MEBT:BPM04_R:A")
	field(INPD, "MEBT:BPM04_L:A")
	field(INPE, "25")
	field(INPF, "0")
	field(CALC, "E*(C-D)/(A+B+C+D)+F")
	field(EGU, "mm")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM04:PosY")
}

record(calc, "MEBT:BPM04:PosY")
{
	field(DESC, "Vertical BPM position")
	field(INPA, "MEBT:BPM04_T:A")
	field(INPB, "MEBT:BPM04_B:A")
	field(INPC, "MEBT:BPM04_R:A")
	field(INPD, "MEBT:BPM04_L:A")
	field(INPE, "25")
	field(INPF, "0")
	field(CALC, "E*(A-B)/(A+B+C+D)+F")
	field(EGU, "mm")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM04:Sum")
#	field(FLNK, "MEBT:BPM04:PosY")
}

record(calc, "MEBT:BPM04:Sum")
{
	field(DESC, "MEBT:BPM04 Sum")
	field(INPA, "MEBT:BPM04_T:A")
	field(INPB, "MEBT:BPM04_B:A")
	field(INPC, "MEBT:BPM04_R:A")
	field(INPD, "MEBT:BPM04_L:A")
	field(CALC, "A+B+C+D")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM04:I")
}

record(calc, "MEBT:BPM04:I")
{
	field(DESC, "MEBT:BPM04 current")
	field(INPA, "MEBT:BPM04_T:A")
	field(INPB, "MEBT:BPM04_B:A")
	field(INPC, "MEBT:BPM04_R:A")
	field(INPD, "MEBT:BPM04_L:A")
	field(INPE, "1")
	field(CALC, "(A+B+C+D)*E+F")
	field(INPF, "0")
	field(EGU, "mA")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM04:MeanPhas")
}

record(calc, "MEBT:BPM04:MeanPhas")
{
	field(DESC, "Mean Phase MEBT:BPM04")
	field(INPA, "MEBT:BPM04_T:Phas")
	field(INPB, "MEBT:BPM04_B:Phas")
	field(INPC, "MEBT:BPM04_R:Phas")
	field(INPD, "MEBT:BPM04_L:Phas")
	field(CALC, "(A+B+C+D)/4.0")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "MEBT:BPM04:RelPhas")
}



###############################################################
# BPM vhs registers for BPM01 station in DPLA subsystem
###############################################################

#
# SIGNAL MEASUREMENTS
#

# TOP BUTTON
record(ai,"DPLA:BPM01_T:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,3)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"DPLA:BPM01_T:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,3)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"DPLA:BPM01_T:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,3)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"DPLA:BPM01_T:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,3)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# BOTTOM BUTTON
record(ai,"DPLA:BPM01_B:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,4)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM01_B:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,4)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM01_B:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,4)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM01_B:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,4)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# RIGHT BUTTON
record(ai,"DPLA:BPM01_R:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,1)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM01_R:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,1)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM01_R:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,1)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM01_R:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,1)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# LEFT BUTTON
record(ai,"DPLA:BPM01_L:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,2)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM01_L:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,2)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM01_L:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,2)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM01_L:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,2)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
	field(FLNK, "DPLA:BPM01_T:A")
}

####################
#
# GAINS
#
## Readbacks
record(ai,"DPLA:BPM01_T:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,3)Gain")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(EGU, "dB")
	field(PREC, "1")
}
record(ai,"DPLA:BPM01_B:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,4)Gain")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(EGU, "dB")
	field(PREC, "1")
}
record(ai,"DPLA:BPM01_R:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,1)Gain")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ai,"DPLA:BPM01_L:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,2)Gain")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
## Settings
record(ao,"DPLA:BPM01_T:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS2,3)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"DPLA:BPM01_B:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS2,4)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"DPLA:BPM01_R:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS2,1)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"DPLA:BPM01_L:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS2,2)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}

###########################
#
# CORRECTED CHANNEL CALCULATIONS
#

record(calc,"DPLA:BPM01_T:A")
{
	field(INPA, "DPLA:BPM01_T:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM01_B:A")
}

record(calc,"DPLA:BPM01_B:A")
{
	field(INPA, "DPLA:BPM01_B:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)	
	field(FLNK, "DPLA:BPM01_R:A")
}

record(calc,"DPLA:BPM01_R:A")
{
	field(INPA, "DPLA:BPM01_R:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM01_L:A")
}

record(calc,"DPLA:BPM01_L:A")
{
	field(INPA, "DPLA:BPM01_L:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM01_T:Phas")
}

record(calc,"DPLA:BPM01_T:Phas")
{
	field(INPA, "DPLA:BPM01_T:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM01_B:Phas")
}

record(calc,"DPLA:BPM01_B:Phas")
{
	field(INPA, "DPLA:BPM01_B:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM01_R:Phas")
}

record(calc,"DPLA:BPM01_R:Phas")
{
	field(INPA, "DPLA:BPM01_R:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM01_L:Phas")
}

record(calc,"DPLA:BPM01_L:Phas")
{
	field(INPA, "DPLA:BPM01_L:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM01:PosX")
}

###########################
#
# POSITION AND ENERGY CALCULATIONS
#

record(calc, "DPLA:BPM01:PosX")
{
	field(DESC, "Horizontal BPM position")
	field(INPA, "DPLA:BPM01_T:A")
	field(INPB, "DPLA:BPM01_B:A")
	field(INPC, "DPLA:BPM01_R:A")
	field(INPD, "DPLA:BPM01_L:A")
	field(INPE, "25")
	field(INPF, "0")
	field(CALC, "E*(C-D)/(A+B+C+D)+F")
	field(EGU, "mm")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM01:PosY")
}

record(calc, "DPLA:BPM01:PosY")
{
	field(DESC, "Vertical BPM position")
	field(INPA, "DPLA:BPM01_T:A")
	field(INPB, "DPLA:BPM01_B:A")
	field(INPC, "DPLA:BPM01_R:A")
	field(INPD, "DPLA:BPM01_L:A")
	field(INPE, "25")
	field(INPF, "0")
	field(CALC, "E*(A-B)/(A+B+C+D)+F")
	field(EGU, "mm")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM01:Sum")
#	field(FLNK, "DPLA:BPM01:PosY")
}

record(calc, "DPLA:BPM01:Sum")
{
	field(DESC, "DPLA:BPM01 Sum")
	field(INPA, "DPLA:BPM01_T:A")
	field(INPB, "DPLA:BPM01_B:A")
	field(INPC, "DPLA:BPM01_R:A")
	field(INPD, "DPLA:BPM01_L:A")
	field(CALC, "A+B+C+D")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM01:I")
}

record(calc, "DPLA:BPM01:I")
{
	field(DESC, "DPLA:BPM01 current")
	field(INPA, "DPLA:BPM01_T:A")
	field(INPB, "DPLA:BPM01_B:A")
	field(INPC, "DPLA:BPM01_R:A")
	field(INPD, "DPLA:BPM01_L:A")
	field(INPE, "1")
	field(CALC, "(A+B+C+D)*E+F")
	field(INPF, "0")
	field(EGU, "mA")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM01:MeanPhas")
}

record(calc, "DPLA:BPM01:MeanPhas")
{
	field(DESC, "Mean Phase DPLA:BPM01")
	field(INPA, "DPLA:BPM01_T:Phas")
	field(INPB, "DPLA:BPM01_B:Phas")
	field(INPC, "DPLA:BPM01_R:Phas")
	field(INPD, "DPLA:BPM01_L:Phas")
	field(CALC, "(A+B+C+D)/4.0")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM01:RelPhas")
}



###############################################################
# BPM vhs registers for BPM02 station in DPLA subsystem
###############################################################

#
# SIGNAL MEASUREMENTS
#

# TOP BUTTON
record(ai,"DPLA:BPM02_T:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,7)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"DPLA:BPM02_T:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,7)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"DPLA:BPM02_T:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,7)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"DPLA:BPM02_T:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,7)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# BOTTOM BUTTON
record(ai,"DPLA:BPM02_B:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,8)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM02_B:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,8)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM02_B:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,8)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM02_B:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,8)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# RIGHT BUTTON
record(ai,"DPLA:BPM02_R:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,5)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM02_R:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,5)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM02_R:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,5)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM02_R:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,5)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# LEFT BUTTON
record(ai,"DPLA:BPM02_L:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,6)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM02_L:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,6)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM02_L:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,6)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM02_L:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,6)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
	field(FLNK, "DPLA:BPM02_T:A")
}

####################
#
# GAINS
#
## Readbacks
record(ai,"DPLA:BPM02_T:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,7)Gain")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(EGU, "dB")
	field(PREC, "1")
}
record(ai,"DPLA:BPM02_B:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,8)Gain")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(EGU, "dB")
	field(PREC, "1")
}
record(ai,"DPLA:BPM02_R:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,5)Gain")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ai,"DPLA:BPM02_L:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,6)Gain")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
## Settings
record(ao,"DPLA:BPM02_T:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS2,7)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"DPLA:BPM02_B:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS2,8)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"DPLA:BPM02_R:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS2,5)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"DPLA:BPM02_L:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS2,6)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}

###########################
#
# CORRECTED CHANNEL CALCULATIONS
#

record(calc,"DPLA:BPM02_T:A")
{
	field(INPA, "DPLA:BPM02_T:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM02_B:A")
}

record(calc,"DPLA:BPM02_B:A")
{
	field(INPA, "DPLA:BPM02_B:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)	
	field(FLNK, "DPLA:BPM02_R:A")
}

record(calc,"DPLA:BPM02_R:A")
{
	field(INPA, "DPLA:BPM02_R:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM02_L:A")
}

record(calc,"DPLA:BPM02_L:A")
{
	field(INPA, "DPLA:BPM02_L:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM02_T:Phas")
}

record(calc,"DPLA:BPM02_T:Phas")
{
	field(INPA, "DPLA:BPM02_T:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM02_B:Phas")
}

record(calc,"DPLA:BPM02_B:Phas")
{
	field(INPA, "DPLA:BPM02_B:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM02_R:Phas")
}

record(calc,"DPLA:BPM02_R:Phas")
{
	field(INPA, "DPLA:BPM02_R:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM02_L:Phas")
}

record(calc,"DPLA:BPM02_L:Phas")
{
	field(INPA, "DPLA:BPM02_L:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM02:PosX")
}

###########################
#
# POSITION AND ENERGY CALCULATIONS
#

record(calc, "DPLA:BPM02:PosX")
{
	field(DESC, "Horizontal BPM position")
	field(INPA, "DPLA:BPM02_T:A")
	field(INPB, "DPLA:BPM02_B:A")
	field(INPC, "DPLA:BPM02_R:A")
	field(INPD, "DPLA:BPM02_L:A")
	field(INPE, "25")
	field(INPF, "0")
	field(CALC, "E*(C-D)/(A+B+C+D)+F")
	field(EGU, "mm")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM02:PosY")
}

record(calc, "DPLA:BPM02:PosY")
{
	field(DESC, "Vertical BPM position")
	field(INPA, "DPLA:BPM02_T:A")
	field(INPB, "DPLA:BPM02_B:A")
	field(INPC, "DPLA:BPM02_R:A")
	field(INPD, "DPLA:BPM02_L:A")
	field(INPE, "25")
	field(INPF, "0")
	field(CALC, "E*(A-B)/(A+B+C+D)+F")
	field(EGU, "mm")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM02:Sum")
#	field(FLNK, "DPLA:BPM02:PosY")
}

record(calc, "DPLA:BPM02:Sum")
{
	field(DESC, "DPLA:BPM02 Sum")
	field(INPA, "DPLA:BPM02_T:A")
	field(INPB, "DPLA:BPM02_B:A")
	field(INPC, "DPLA:BPM02_R:A")
	field(INPD, "DPLA:BPM02_L:A")
	field(CALC, "A+B+C+D")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM02:I")
}

record(calc, "DPLA:BPM02:I")
{
	field(DESC, "DPLA:BPM02 current")
	field(INPA, "DPLA:BPM02_T:A")
	field(INPB, "DPLA:BPM02_B:A")
	field(INPC, "DPLA:BPM02_R:A")
	field(INPD, "DPLA:BPM02_L:A")
	field(INPE, "1")
	field(CALC, "(A+B+C+D)*E+F")
	field(INPF, "0")
	field(EGU, "mA")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM02:MeanPhas")
}

record(calc, "DPLA:BPM02:MeanPhas")
{
	field(DESC, "Mean Phase DPLA:BPM02")
	field(INPA, "DPLA:BPM02_T:Phas")
	field(INPB, "DPLA:BPM02_B:Phas")
	field(INPC, "DPLA:BPM02_R:Phas")
	field(INPD, "DPLA:BPM02_L:Phas")
	field(CALC, "(A+B+C+D)/4.0")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM02:RelPhas")
}



###############################################################
# BPM vhs registers for BPM03 station in DPLA subsystem
###############################################################

#
# SIGNAL MEASUREMENTS
#

# TOP BUTTON
record(ai,"DPLA:BPM03_T:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,11)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"DPLA:BPM03_T:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,11)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"DPLA:BPM03_T:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,11)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"DPLA:BPM03_T:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,11)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# BOTTOM BUTTON
record(ai,"DPLA:BPM03_B:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,12)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM03_B:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,12)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM03_B:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,12)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM03_B:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,12)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# RIGHT BUTTON
record(ai,"DPLA:BPM03_R:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,9)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM03_R:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,9)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM03_R:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,9)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM03_R:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,9)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# LEFT BUTTON
record(ai,"DPLA:BPM03_L:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,10)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM03_L:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,10)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM03_L:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,10)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"DPLA:BPM03_L:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,10)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
	field(FLNK, "DPLA:BPM03_T:A")
}

####################
#
# GAINS
#
## Readbacks
record(ai,"DPLA:BPM03_T:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,11)Gain")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(EGU, "dB")
	field(PREC, "1")
}
record(ai,"DPLA:BPM03_B:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,12)Gain")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(EGU, "dB")
	field(PREC, "1")
}
record(ai,"DPLA:BPM03_R:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,9)Gain")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ai,"DPLA:BPM03_L:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,10)Gain")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
## Settings
record(ao,"DPLA:BPM03_T:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS2,11)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"DPLA:BPM03_B:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS2,12)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"DPLA:BPM03_R:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS2,9)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"DPLA:BPM03_L:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS2,10)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}

###########################
#
# CORRECTED CHANNEL CALCULATIONS
#

record(calc,"DPLA:BPM03_T:A")
{
	field(INPA, "DPLA:BPM03_T:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM03_B:A")
}

record(calc,"DPLA:BPM03_B:A")
{
	field(INPA, "DPLA:BPM03_B:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)	
	field(FLNK, "DPLA:BPM03_R:A")
}

record(calc,"DPLA:BPM03_R:A")
{
	field(INPA, "DPLA:BPM03_R:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM03_L:A")
}

record(calc,"DPLA:BPM03_L:A")
{
	field(INPA, "DPLA:BPM03_L:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM03_T:Phas")
}

record(calc,"DPLA:BPM03_T:Phas")
{
	field(INPA, "DPLA:BPM03_T:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM03_B:Phas")
}

record(calc,"DPLA:BPM03_B:Phas")
{
	field(INPA, "DPLA:BPM03_B:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM03_R:Phas")
}

record(calc,"DPLA:BPM03_R:Phas")
{
	field(INPA, "DPLA:BPM03_R:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM03_L:Phas")
}

record(calc,"DPLA:BPM03_L:Phas")
{
	field(INPA, "DPLA:BPM03_L:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM03:PosX")
}

###########################
#
# POSITION AND ENERGY CALCULATIONS
#

record(calc, "DPLA:BPM03:PosX")
{
	field(DESC, "Horizontal BPM position")
	field(INPA, "DPLA:BPM03_T:A")
	field(INPB, "DPLA:BPM03_B:A")
	field(INPC, "DPLA:BPM03_R:A")
	field(INPD, "DPLA:BPM03_L:A")
	field(INPE, "25")
	field(INPF, "0")
	field(CALC, "E*(C-D)/(A+B+C+D)+F")
	field(EGU, "mm")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM03:PosY")
}

record(calc, "DPLA:BPM03:PosY")
{
	field(DESC, "Vertical BPM position")
	field(INPA, "DPLA:BPM03_T:A")
	field(INPB, "DPLA:BPM03_B:A")
	field(INPC, "DPLA:BPM03_R:A")
	field(INPD, "DPLA:BPM03_L:A")
	field(INPE, "25")
	field(INPF, "0")
	field(CALC, "E*(A-B)/(A+B+C+D)+F")
	field(EGU, "mm")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM03:Sum")
#	field(FLNK, "DPLA:BPM03:PosY")
}

record(calc, "DPLA:BPM03:Sum")
{
	field(DESC, "DPLA:BPM03 Sum")
	field(INPA, "DPLA:BPM03_T:A")
	field(INPB, "DPLA:BPM03_B:A")
	field(INPC, "DPLA:BPM03_R:A")
	field(INPD, "DPLA:BPM03_L:A")
	field(CALC, "A+B+C+D")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM03:I")
}

record(calc, "DPLA:BPM03:I")
{
	field(DESC, "DPLA:BPM03 current")
	field(INPA, "DPLA:BPM03_T:A")
	field(INPB, "DPLA:BPM03_B:A")
	field(INPC, "DPLA:BPM03_R:A")
	field(INPD, "DPLA:BPM03_L:A")
	field(INPE, "1")
	field(CALC, "(A+B+C+D)*E+F")
	field(INPF, "0")
	field(EGU, "mA")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM03:MeanPhas")
}

record(calc, "DPLA:BPM03:MeanPhas")
{
	field(DESC, "Mean Phase DPLA:BPM03")
	field(INPA, "DPLA:BPM03_T:Phas")
	field(INPB, "DPLA:BPM03_B:Phas")
	field(INPC, "DPLA:BPM03_R:Phas")
	field(INPD, "DPLA:BPM03_L:Phas")
	field(CALC, "(A+B+C+D)/4.0")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "DPLA:BPM03:RelPhas")
}



###############################################################
# BPM vhs registers for BPM01 station in SRF subsystem
###############################################################

#
# SIGNAL MEASUREMENTS
#

# TOP BUTTON
record(ai,"SRF:BPM01_T:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,13)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"SRF:BPM01_T:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,13)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"SRF:BPM01_T:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,13)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "4")
}
record(ai,"SRF:BPM01_T:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,13)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# BOTTOM BUTTON
record(ai,"SRF:BPM01_B:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,14)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"SRF:BPM01_B:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,14)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"SRF:BPM01_B:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,14)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"SRF:BPM01_B:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,14)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# RIGHT BUTTON
record(ai,"SRF:BPM01_R:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,15)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"SRF:BPM01_R:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,15)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"SRF:BPM01_R:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,15)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"SRF:BPM01_R:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,15)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
}

# LEFT BUTTON
record(ai,"SRF:BPM01_L:Iraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,16)I")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"SRF:BPM01_L:Qraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,16)Q")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"SRF:BPM01_L:Araw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,16)A")
	field(EGU, "mV")
	field(LINR, "SLOPE")
	field(ESLO, "3.051850947599720E-02")
	field(EOFF, "0")
	field(PREC, "2")
}
record(ai,"SRF:BPM01_L:Phasraw")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,16)Phas")
	field(EGU, "deg")
	field(LINR, "SLOPE")
	field(ESLO, "0.00549333170567949")
	field(EOFF, "0")
	field(PREC, "1")
	field(FLNK, "SRF:BPM01_T:A")
}

####################
#
# GAINS
#
## Readbacks
record(ai,"SRF:BPM01_T:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,13)Gain")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(EGU, "dB")
	field(PREC, "1")
}
record(ai,"SRF:BPM01_B:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,14)Gain")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(EGU, "dB")
	field(PREC, "1")
}
record(ai,"SRF:BPM01_R:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,15)Gain")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ai,"SRF:BPM01_L:Gain")
{
	field(DTYP,"asynInt32")
	field(SCAN,"I/O Intr")
	field(INP, "@asyn(BPM_VHS2,16)Gain")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
## Settings
record(ao,"SRF:BPM01_T:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS2,13)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"SRF:BPM01_B:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS2,14)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"SRF:BPM01_R:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS2,15)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}
record(ao,"SRF:BPM01_L:GainSet")
{
	field(DTYP,"asynInt32")
	field(OUT, "@asyn(BPM_VHS2,16)GainSet")
	field(DRVL, "10.5")
	field(DRVH, "33")
	field(EGU, "dB")
	field(LINR, "SLOPE")
	field(ESLO, "1.5")
	field(EOFF, "10.5")
	field(PREC, "1")
}

###########################
#
# CORRECTED CHANNEL CALCULATIONS
#

record(calc,"SRF:BPM01_T:A")
{
	field(INPA, "SRF:BPM01_T:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "SRF:BPM01_B:A")
}

record(calc,"SRF:BPM01_B:A")
{
	field(INPA, "SRF:BPM01_B:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)	
	field(FLNK, "SRF:BPM01_R:A")
}

record(calc,"SRF:BPM01_R:A")
{
	field(INPA, "SRF:BPM01_R:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "SRF:BPM01_L:A")
}

record(calc,"SRF:BPM01_L:A")
{
	field(INPA, "SRF:BPM01_L:Araw")
	field(INPB, "1")
	field(CALC, "A*B")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "SRF:BPM01_T:Phas")
}

record(calc,"SRF:BPM01_T:Phas")
{
	field(INPA, "SRF:BPM01_T:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "SRF:BPM01_B:Phas")
}

record(calc,"SRF:BPM01_B:Phas")
{
	field(INPA, "SRF:BPM01_B:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "SRF:BPM01_R:Phas")
}

record(calc,"SRF:BPM01_R:Phas")
{
	field(INPA, "SRF:BPM01_R:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "SRF:BPM01_L:Phas")
}

record(calc,"SRF:BPM01_L:Phas")
{
	field(INPA, "SRF:BPM01_L:Phasraw")
	field(INPB, "0")
	field(CALC, "A-B")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "SRF:BPM01:PosX")
}

###########################
#
# POSITION AND ENERGY CALCULATIONS
#

record(calc, "SRF:BPM01:PosX")
{
	field(DESC, "Horizontal BPM position")
	field(INPA, "SRF:BPM01_T:A")
	field(INPB, "SRF:BPM01_B:A")
	field(INPC, "SRF:BPM01_R:A")
	field(INPD, "SRF:BPM01_L:A")
	field(INPE, "25")
	field(INPF, "0")
	field(CALC, "E*(C-D)/(A+B+C+D)+F")
	field(EGU, "mm")
	field(PREC, 4)
	field(FLNK, "SRF:BPM01:PosY")
}

record(calc, "SRF:BPM01:PosY")
{
	field(DESC, "Vertical BPM position")
	field(INPA, "SRF:BPM01_T:A")
	field(INPB, "SRF:BPM01_B:A")
	field(INPC, "SRF:BPM01_R:A")
	field(INPD, "SRF:BPM01_L:A")
	field(INPE, "25")
	field(INPF, "0")
	field(CALC, "E*(A-B)/(A+B+C+D)+F")
	field(EGU, "mm")
	field(PREC, 4)
	field(FLNK, "SRF:BPM01:Sum")
#	field(FLNK, "SRF:BPM01:PosY")
}

record(calc, "SRF:BPM01:Sum")
{
	field(DESC, "SRF:BPM01 Sum")
	field(INPA, "SRF:BPM01_T:A")
	field(INPB, "SRF:BPM01_B:A")
	field(INPC, "SRF:BPM01_R:A")
	field(INPD, "SRF:BPM01_L:A")
	field(CALC, "A+B+C+D")
	field(EGU, "mV")
	field(PREC, 4)
	field(FLNK, "SRF:BPM01:I")
}

record(calc, "SRF:BPM01:I")
{
	field(DESC, "SRF:BPM01 current")
	field(INPA, "SRF:BPM01_T:A")
	field(INPB, "SRF:BPM01_B:A")
	field(INPC, "SRF:BPM01_R:A")
	field(INPD, "SRF:BPM01_L:A")
	field(INPE, "1")
	field(CALC, "(A+B+C+D)*E+F")
	field(INPF, "0")
	field(EGU, "mA")
	field(PREC, 4)
	field(FLNK, "SRF:BPM01:MeanPhas")
}

record(calc, "SRF:BPM01:MeanPhas")
{
	field(DESC, "Mean Phase SRF:BPM01")
	field(INPA, "SRF:BPM01_T:Phas")
	field(INPB, "SRF:BPM01_B:Phas")
	field(INPC, "SRF:BPM01_R:Phas")
	field(INPD, "SRF:BPM01_L:Phas")
	field(CALC, "(A+B+C+D)/4.0")
	field(EGU, "deg")
	field(PREC, 4)
	field(FLNK, "SRF:BPM01:RelPhas")
}



#################################
# REFERENCE PHASE MEASUREMENTS  #
#################################

#record(calc, "MEBT:BPM01_T:RelPhas")
#{
#	field(DESC, "MEBT BPM01_T relative phase")
#	field(INPA, "MEBT:BPM01_T:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#	field(FLNK, "MEBT:BPM01_B:RelPhas")
#}
#
#record(calc, "MEBT:BPM01_B:RelPhas")
#{
#	field(DESC, "MEBT BPM01_B relative phase")
#	field(INPA, "MEBT:BPM01_B:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#	field(FLNK, "MEBT:BPM01_R:RelPhas")
#}
#
#record(calc, "MEBT:BPM01_R:RelPhas")
#{
#	field(DESC, "MEBT BPM01_R relative phase")
#	field(INPA, "MEBT:BPM01_R:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#	field(FLNK, "MEBT:BPM01_L:RelPhas")
#}
#
#record(calc, "MEBT:BPM01_L:RelPhas")
#{
#	field(DESC, "MEBT BPM01_L relative phase")
#	field(INPA, "MEBT:BPM01_L:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#}
record(calc, "MEBT:BPM01:RelPhas")
{
	field(DESC, "MEBT BPM01 relative phase")
	field(INPA, "MEBT:BPM01:MeanPhas")
	field(INPB, "SRF:BPM01_L:Phas")
	field(CALC, "(A-B)")
	field(EGU, "deg")
	field(PREC, 2)
}

#################################
# REFERENCE PHASE MEASUREMENTS  #
#################################

#record(calc, "MEBT:BPM02_T:RelPhas")
#{
#	field(DESC, "MEBT BPM02_T relative phase")
#	field(INPA, "MEBT:BPM02_T:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#	field(FLNK, "MEBT:BPM02_B:RelPhas")
#}
#
#record(calc, "MEBT:BPM02_B:RelPhas")
#{
#	field(DESC, "MEBT BPM02_B relative phase")
#	field(INPA, "MEBT:BPM02_B:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#	field(FLNK, "MEBT:BPM02_R:RelPhas")
#}
#
#record(calc, "MEBT:BPM02_R:RelPhas")
#{
#	field(DESC, "MEBT BPM02_R relative phase")
#	field(INPA, "MEBT:BPM02_R:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#	field(FLNK, "MEBT:BPM02_L:RelPhas")
#}
#
#record(calc, "MEBT:BPM02_L:RelPhas")
#{
#	field(DESC, "MEBT BPM02_L relative phase")
#	field(INPA, "MEBT:BPM02_L:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#}
record(calc, "MEBT:BPM02:RelPhas")
{
	field(DESC, "MEBT BPM02 relative phase")
	field(INPA, "MEBT:BPM02:MeanPhas")
	field(INPB, "SRF:BPM01_L:Phas")
	field(CALC, "(A-B)")
	field(EGU, "deg")
	field(PREC, 2)
}

#################################
# REFERENCE PHASE MEASUREMENTS  #
#################################

#record(calc, "MEBT:BPM03_T:RelPhas")
#{
#	field(DESC, "MEBT BPM03_T relative phase")
#	field(INPA, "MEBT:BPM03_T:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#	field(FLNK, "MEBT:BPM03_B:RelPhas")
#}
#
#record(calc, "MEBT:BPM03_B:RelPhas")
#{
#	field(DESC, "MEBT BPM03_B relative phase")
#	field(INPA, "MEBT:BPM03_B:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#	field(FLNK, "MEBT:BPM03_R:RelPhas")
#}
#
#record(calc, "MEBT:BPM03_R:RelPhas")
#{
#	field(DESC, "MEBT BPM03_R relative phase")
#	field(INPA, "MEBT:BPM03_R:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#	field(FLNK, "MEBT:BPM03_L:RelPhas")
#}
#
#record(calc, "MEBT:BPM03_L:RelPhas")
#{
#	field(DESC, "MEBT BPM03_L relative phase")
#	field(INPA, "MEBT:BPM03_L:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#}
record(calc, "MEBT:BPM03:RelPhas")
{
	field(DESC, "MEBT BPM03 relative phase")
	field(INPA, "MEBT:BPM03:MeanPhas")
	field(INPB, "SRF:BPM01_L:Phas")
	field(CALC, "(A-B)")
	field(EGU, "deg")
	field(PREC, 2)
}

#################################
# REFERENCE PHASE MEASUREMENTS  #
#################################

#record(calc, "MEBT:BPM04_T:RelPhas")
#{
#	field(DESC, "MEBT BPM04_T relative phase")
#	field(INPA, "MEBT:BPM04_T:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#	field(FLNK, "MEBT:BPM04_B:RelPhas")
#}
#
#record(calc, "MEBT:BPM04_B:RelPhas")
#{
#	field(DESC, "MEBT BPM04_B relative phase")
#	field(INPA, "MEBT:BPM04_B:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#	field(FLNK, "MEBT:BPM04_R:RelPhas")
#}
#
#record(calc, "MEBT:BPM04_R:RelPhas")
#{
#	field(DESC, "MEBT BPM04_R relative phase")
#	field(INPA, "MEBT:BPM04_R:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#	field(FLNK, "MEBT:BPM04_L:RelPhas")
#}
#
#record(calc, "MEBT:BPM04_L:RelPhas")
#{
#	field(DESC, "MEBT BPM04_L relative phase")
#	field(INPA, "MEBT:BPM04_L:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#}
record(calc, "MEBT:BPM04:RelPhas")
{
	field(DESC, "MEBT BPM04 relative phase")
	field(INPA, "MEBT:BPM04:MeanPhas")
	field(INPB, "SRF:BPM01_L:Phas")
	field(CALC, "(A-B)")
	field(EGU, "deg")
	field(PREC, 2)
}

#################################
# REFERENCE PHASE MEASUREMENTS  #
#################################

#record(calc, "DPLA:BPM01_T:RelPhas")
#{
#	field(DESC, "DPLA BPM01_T relative phase")
#	field(INPA, "DPLA:BPM01_T:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#	field(FLNK, "DPLA:BPM01_B:RelPhas")
#}
#
#record(calc, "DPLA:BPM01_B:RelPhas")
#{
#	field(DESC, "DPLA BPM01_B relative phase")
#	field(INPA, "DPLA:BPM01_B:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#	field(FLNK, "DPLA:BPM01_R:RelPhas")
#}
#
#record(calc, "DPLA:BPM01_R:RelPhas")
#{
#	field(DESC, "DPLA BPM01_R relative phase")
#	field(INPA, "DPLA:BPM01_R:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#	field(FLNK, "DPLA:BPM01_L:RelPhas")
#}
#
#record(calc, "DPLA:BPM01_L:RelPhas")
#{
#	field(DESC, "DPLA BPM01_L relative phase")
#	field(INPA, "DPLA:BPM01_L:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#}
record(calc, "DPLA:BPM01:RelPhas")
{
	field(DESC, "DPLA BPM01 relative phase")
	field(INPA, "DPLA:BPM01:MeanPhas")
	field(INPB, "SRF:BPM01_L:Phas")
	field(CALC, "(A-B)")
	field(EGU, "deg")
	field(PREC, 2)
}

#################################
# REFERENCE PHASE MEASUREMENTS  #
#################################

#record(calc, "DPLA:BPM02_T:RelPhas")
#{
#	field(DESC, "DPLA BPM02_T relative phase")
#	field(INPA, "DPLA:BPM02_T:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#	field(FLNK, "DPLA:BPM02_B:RelPhas")
#}
#
#record(calc, "DPLA:BPM02_B:RelPhas")
#{
#	field(DESC, "DPLA BPM02_B relative phase")
#	field(INPA, "DPLA:BPM02_B:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#	field(FLNK, "DPLA:BPM02_R:RelPhas")
#}
#
#record(calc, "DPLA:BPM02_R:RelPhas")
#{
#	field(DESC, "DPLA BPM02_R relative phase")
#	field(INPA, "DPLA:BPM02_R:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#	field(FLNK, "DPLA:BPM02_L:RelPhas")
#}
#
#record(calc, "DPLA:BPM02_L:RelPhas")
#{
#	field(DESC, "DPLA BPM02_L relative phase")
#	field(INPA, "DPLA:BPM02_L:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#}
record(calc, "DPLA:BPM02:RelPhas")
{
	field(DESC, "DPLA BPM02 relative phase")
	field(INPA, "DPLA:BPM02:MeanPhas")
	field(INPB, "SRF:BPM01_L:Phas")
	field(CALC, "(A-B)")
	field(EGU, "deg")
	field(PREC, 2)
}

#################################
# REFERENCE PHASE MEASUREMENTS  #
#################################

#record(calc, "DPLA:BPM03_T:RelPhas")
#{
#	field(DESC, "DPLA BPM03_T relative phase")
#	field(INPA, "DPLA:BPM03_T:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#	field(FLNK, "DPLA:BPM03_B:RelPhas")
#}
#
#record(calc, "DPLA:BPM03_B:RelPhas")
#{
#	field(DESC, "DPLA BPM03_B relative phase")
#	field(INPA, "DPLA:BPM03_B:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#	field(FLNK, "DPLA:BPM03_R:RelPhas")
#}
#
#record(calc, "DPLA:BPM03_R:RelPhas")
#{
#	field(DESC, "DPLA BPM03_R relative phase")
#	field(INPA, "DPLA:BPM03_R:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#	field(FLNK, "DPLA:BPM03_L:RelPhas")
#}
#
#record(calc, "DPLA:BPM03_L:RelPhas")
#{
#	field(DESC, "DPLA BPM03_L relative phase")
#	field(INPA, "DPLA:BPM03_L:Phas")
#	field(INPB, "SRF:BPM01_L:Phas")
#	field(CALC, "(A-B)")
#	field(EGU, "deg")
#	field(PREC, 2)
#}
record(calc, "DPLA:BPM03:RelPhas")
{
	field(DESC, "DPLA BPM03 relative phase")
	field(INPA, "DPLA:BPM03:MeanPhas")
	field(INPB, "SRF:BPM01_L:Phas")
	field(CALC, "(A-B)")
	field(EGU, "deg")
	field(PREC, 2)
}

